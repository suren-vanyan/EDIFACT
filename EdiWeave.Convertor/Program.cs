using EDIFACT.TEMPLATES.D99B;
using EdiWeave.Core.Model.Edi;
using EdiWeave.Core.Model.Edi.Edifact;
using EdiWeave.Core.Model.Edi.ErrorContexts;
using EdiWeave.Framework.Readers;
using EdiWeave.Framework.Writers;
using Newtonsoft.Json;
using Newtonsoft.Json.Linq;
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Reflection;
using System.Text;
using System.Xml;

namespace EdiWeave.Convertor
{
    class Program
    {
        static void Main(string[] args)
        {
            //var str = "[\n  {\n    \"keyIn\": null,\n    \"keyOut\": \"UNB\",\n    \"value\": null,\n    \"type\": \"Object\",\n    \"format\": null,\n    \"keyOutValidation\": null,\n    \"functions\": [],\n    \"childs\": [\n      {\n        \"keyIn\": null,\n        \"keyOut\": \"SYNTAXIDENTIFIER_1\",\n        \"value\": null,\n        \"type\": \"Object\",\n        \"format\": null,\n        \"keyOutValidation\": null,\n        \"functions\": [],\n        \"childs\": [\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"SyntaxIdentifier_1\",\n            \"value\": \"UNOC\",\n            \"type\": \"String\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": []\n          },\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"SyntaxVersionNumber_2\",\n            \"value\": \"3\",\n            \"type\": \"String\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": []\n          }\n        ]\n      },\n      {\n        \"keyIn\": null,\n        \"keyOut\": \"INTERCHANGESENDER_2\",\n        \"value\": null,\n        \"type\": \"Object\",\n        \"format\": null,\n        \"keyOutValidation\": null,\n        \"functions\": [],\n        \"childs\": [\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"InterchangeSenderIdentification_1\",\n            \"value\": \"COMSUP\",\n            \"type\": \"String\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": []\n          },\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"IdentificationCodeQualifier_2\",\n            \"value\": \"ZZZ\",\n            \"type\": \"String\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": []\n          }\n        ]\n      },\n      {\n        \"keyIn\": null,\n        \"keyOut\": \"INTERCHANGERECIPIENT_3\",\n        \"value\": null,\n        \"type\": \"Object\",\n        \"format\": null,\n        \"keyOutValidation\": null,\n        \"functions\": [],\n        \"childs\": [\n          {\n            \"keyIn\": \"carrierCode\",\n            \"keyOut\": \"InterchangeRecipientIdentification_1\",\n            \"value\": null,\n            \"type\": \"String\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": []\n          },\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"IdentificationCodeQualifier_2\",\n            \"value\": \"ZZZ\",\n            \"type\": \"String\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": []\n          }\n        ]\n      },\n      {\n        \"keyIn\": null,\n        \"keyOut\": \"DATEANDTIMEOFPREPARATION_4\",\n        \"value\": null,\n        \"type\": \"Object\",\n        \"format\": null,\n        \"keyOutValidation\": null,\n        \"functions\": [],\n        \"childs\": [\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"Date_1\",\n            \"value\": null,\n            \"type\": \"Date\",\n            \"format\": \"yyyyMM\",\n            \"keyOutValidation\": null,\n            \"functions\": [\n              {\n                \"function\": \"DateTimeToday\",\n                \"parameter\": \"\",\n                \"type\": 1\n              }\n            ],\n            \"childs\": []\n          },\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"Time_2\",\n            \"value\": null,\n            \"type\": \"Date\",\n            \"format\": \"HHmm\",\n            \"keyOutValidation\": null,\n            \"functions\": [\n              {\n                \"function\": \"DateTimeToday\",\n                \"parameter\": \"\",\n                \"type\": 1\n              }\n            ],\n            \"childs\": []\n          }\n        ]\n      },\n      {\n        \"keyIn\": \"shipmentPlanId\",\n        \"keyOut\": \"InterchangeControlReference_5\",\n        \"value\": null,\n        \"type\": \"String\",\n        \"format\": null,\n        \"keyOutValidation\": null,\n        \"functions\": [],\n        \"childs\": []\n      }\n    ]\n  },\n  {\n    \"keyIn\": null,\n    \"keyOut\": \"IFTMBF\",\n    \"value\": null,\n    \"type\": \"Object\",\n    \"format\": null,\n    \"keyOutValidation\": null,\n    \"functions\": [],\n    \"childs\": [\n      {\n        \"keyIn\": null,\n        \"keyOut\": \"UNH\",\n        \"value\": null,\n        \"type\": \"Object\",\n        \"format\": null,\n        \"keyOutValidation\": null,\n        \"functions\": [],\n        \"childs\": [\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"MessageReferenceNumber_01\",\n            \"value\": null,\n            \"type\": \"String\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": []\n          },\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"MessageIdentifier_02\",\n            \"value\": null,\n            \"type\": \"Object\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": [\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"MessageType_01\",\n                \"value\": \"IFTMBF\",\n                \"type\": \"String\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": []\n              },\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"MessageVersionNumber_02\",\n                \"value\": \"D\",\n                \"type\": \"String\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": []\n              },\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"MessageReleaseNumber_03\",\n                \"value\": \"99B\",\n                \"type\": \"String\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": []\n              },\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"ControllingAgencyCoded_04\",\n                \"value\": \"UN\",\n                \"type\": \"String\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": []\n              }\n            ]\n          }\n        ]\n      },\n      {\n        \"keyIn\": null,\n        \"keyOut\": \"BGM\",\n        \"value\": null,\n        \"type\": \"Object\",\n        \"format\": null,\n        \"keyOutValidation\": null,\n        \"functions\": [],\n        \"childs\": [\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"DOCUMENTMESSAGENAME_01\",\n            \"value\": null,\n            \"type\": \"Object\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": [\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"DocumentNameCode\",\n                \"value\": \"335\",\n                \"type\": \"String\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": []\n              }\n            ]\n          },\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"DOCUMENTMESSAGEIDENTIFICATION_02\",\n            \"value\": null,\n            \"type\": \"Object\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": [\n              {\n                \"keyIn\": \"cargooReference\",\n                \"keyOut\": \"DocumentMessageNumber\",\n                \"value\": null,\n                \"type\": \"String\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": []\n              }\n            ]\n          },\n          {\n            \"keyIn\": \"type\",\n            \"keyOut\": \"MessageFunctionCode_03\",\n            \"value\": null,\n            \"type\": \"Integer\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [\n              {\n                \"function\": \"SelectValueForArray\",\n                \"parameter\": \"0=9|1=4|2=1\",\n                \"type\": 1\n              }\n            ],\n            \"childs\": []\n          }\n        ]\n      },\n      {\n        \"keyIn\": null,\n        \"keyOut\": \"CTA\",\n        \"value\": null,\n        \"type\": \"Object\",\n        \"format\": null,\n        \"keyOutValidation\": null,\n        \"functions\": [\n          {\n            \"function\": \"HasValue\",\n            \"parameter\": \"userName\",\n            \"type\": 2\n          }\n        ],\n        \"childs\": [\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"ContactFunctionCode\",\n            \"value\": \"IC\",\n            \"type\": \"String\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": []\n          },\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"DEPARTMENTOREMPLOYEEDETAILS_02\",\n            \"value\": null,\n            \"type\": \"Object\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": [\n              {\n                \"keyIn\": \"userName\",\n                \"keyOut\": \"Departmentoremployee_02\",\n                \"value\": null,\n                \"type\": \"String\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": []\n              }\n            ]\n          }\n        ]\n      },\n      {\n        \"keyIn\": null,\n        \"keyOut\": \"COM\",\n        \"value\": null,\n        \"type\": \"loop\",\n        \"format\": null,\n        \"keyOutValidation\": null,\n        \"functions\": [\n          {\n            \"function\": \"HasValue\",\n            \"parameter\": \"userEmail\",\n            \"type\": 2\n          }\n        ],\n        \"childs\": [\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"COMMUNICATIONCONTACT_01\",\n            \"value\": null,\n            \"type\": \"Object\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": [\n              {\n                \"keyIn\": \"userEmail\",\n                \"keyOut\": \"CommunicationNumber_01\",\n                \"value\": null,\n                \"type\": \"string\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": []\n              },\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"CommunicationNumberCodeQualifier_02\",\n                \"value\": \"EM\",\n                \"type\": \"string\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": []\n              }\n            ]\n          }\n        ]\n      },\n      {\n        \"keyIn\": \"\",\n        \"keyOut\": \"DTM\",\n        \"value\": null,\n        \"type\": \"loop\",\n        \"format\": null,\n        \"keyOutValidation\": null,\n        \"functions\": [],\n        \"childs\": [\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"DATETIMEPERIOD_01\",\n            \"value\": null,\n            \"type\": \"Object\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": [\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"Dateortimeorperiodfunctioncodequalifier_01\",\n                \"value\": \"137\",\n                \"type\": \"string\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": []\n              },\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"Dateortimeorperiodvalue_02\",\n                \"value\": null,\n                \"type\": \"Date\",\n                \"format\": \"yyyyMMddHHmm\",\n                \"keyOutValidation\": null,\n                \"functions\": [\n                  {\n                    \"function\": \"GenerateUniversalDateForNow\",\n                    \"parameter\": \"\",\n                    \"type\": 1\n                  }\n                ],\n                \"childs\": []\n              },\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"Dateortimeorperiodformatcode_03\",\n                \"value\": \"203\",\n                \"type\": \"string\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": []\n              }\n            ]\n          }\n        ]\n      },\n      {\n        \"keyIn\": \"\",\n        \"keyOut\": \"FTX\",\n        \"value\": null,\n        \"type\": \"loop\",\n        \"format\": null,\n        \"keyOutValidation\": null,\n        \"functions\": [\n          {\n            \"function\": \"HasValue\",\n            \"parameter\": \"bookingComments\",\n            \"type\": 2\n          }\n        ],\n        \"childs\": [\n          {\n            \"keyIn\": \"\",\n            \"keyOut\": \"Textsubjectcodequalifier_01\",\n            \"value\": \"AAI\",\n            \"type\": \"string\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": []\n          },\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"TEXTLITERAL_04\",\n            \"value\": null,\n            \"type\": \"Object\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": [\n              {\n                \"keyIn\": \"bookingComments\",\n                \"keyOut\": \"Freetext_01\",\n                \"value\": null,\n                \"type\": \"string\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": []\n              }\n            ]\n          }\n        ]\n      },\n      {\n        \"keyIn\": \"\",\n        \"keyOut\": \"TSR\",\n        \"value\": null,\n        \"type\": \"loop\",\n        \"format\": null,\n        \"keyOutValidation\": null,\n        \"functions\": [\n          {\n            \"function\": \"HasValue\",\n            \"parameter\": \"bookingComments\",\n            \"type\": 2\n          }\n        ],\n        \"childs\": [\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"CONTRACTANDCARRIAGECONDITION_01\",\n            \"value\": null,\n            \"type\": \"Object\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": [\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"Contractandcarriageconditioncode_01\",\n                \"value\": null,\n                \"type\": \"string\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [\n                  {\n                    \"function\": \"MapTransportMove\",\n                    \"parameter\": \"#placeOfReceipt.type,#finalDestination.type\",\n                    \"type\": 4\n                  }\n                ],\n                \"childs\": []\n              }\n            ]\n          },\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"SERVICE\",\n            \"value\": null,\n            \"type\": \"Object\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [\n              {\n                \"function\": \"Filter\",\n                \"parameter\": \"movementType=2\",\n                \"type\": 2\n              }\n            ],\n            \"childs\": [\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"ServiceRequirementCode_1\",\n                \"value\": \"5\",\n                \"type\": \"String\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": []\n              }\n            ]\n          }\n        ]\n      },\n      {\n        \"keyIn\": \"\",\n        \"keyOut\": \"RFFLoop\",\n        \"value\": null,\n        \"type\": \"loop\",\n        \"format\": null,\n        \"keyOutValidation\": null,\n        \"functions\": [],\n        \"childs\": [\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"RFF\",\n            \"value\": null,\n            \"type\": \"Object\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [\n              {\n                \"function\": \"HasValue\",\n                \"parameter\": \"rateContractNumber\",\n                \"type\": 2\n              }\n            ],\n            \"childs\": [\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"REFERENCE_01\",\n                \"value\": null,\n                \"type\": \"Object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"Referencefunctioncodequalifier_01\",\n                    \"value\": \"CT\",\n                    \"type\": \"String\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": \"rateContractNumber\",\n                    \"keyOut\": \"Referenceidentifier_02\",\n                    \"value\": null,\n                    \"type\": \"String\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      },\n      {\n        \"keyIn\": \"\",\n        \"keyOut\": \"RFFLoop\",\n        \"value\": null,\n        \"type\": \"loop\",\n        \"format\": null,\n        \"keyOutValidation\": null,\n        \"functions\": [],\n        \"childs\": [\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"RFF\",\n            \"value\": null,\n            \"type\": \"Object\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [\n              {\n                \"function\": \"HasValue\",\n                \"parameter\": \"cargooReference\",\n                \"type\": 2\n              }\n            ],\n            \"childs\": [\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"REFERENCE_01\",\n                \"value\": null,\n                \"type\": \"Object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"Referencefunctioncodequalifier_01\",\n                    \"value\": \"AGE\",\n                    \"type\": \"String\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": \"cargooReference\",\n                    \"keyOut\": \"Referenceidentifier_02\",\n                    \"value\": null,\n                    \"type\": \"String\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      },\n      {\n        \"keyIn\": \"\",\n        \"keyOut\": \"RFFLoop\",\n        \"value\": null,\n        \"type\": \"loop\",\n        \"format\": null,\n        \"keyOutValidation\": null,\n        \"functions\": [],\n        \"childs\": [\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"RFF\",\n            \"value\": null,\n            \"type\": \"Object\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [\n              {\n                \"function\": \"HasValue\",\n                \"parameter\": \"bookingNumber\",\n                \"type\": 2\n              }\n            ],\n            \"childs\": [\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"REFERENCE_01\",\n                \"value\": null,\n                \"type\": \"Object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"Referencefunctioncodequalifier_01\",\n                    \"value\": \"BN\",\n                    \"type\": \"String\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": \"bookingNumber\",\n                    \"keyOut\": \"Referenceidentifier_02\",\n                    \"value\": null,\n                    \"type\": \"String\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      },\n      {\n        \"keyIn\": \"\",\n        \"keyOut\": \"RFFLoop\",\n        \"value\": null,\n        \"type\": \"loop\",\n        \"format\": null,\n        \"keyOutValidation\": null,\n        \"functions\": [],\n        \"childs\": [\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"RFF\",\n            \"value\": null,\n            \"type\": \"Object\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [\n              {\n                \"function\": \"HasValue\",\n                \"parameter\": \"serviceProviderReference\",\n                \"type\": 2\n              }\n            ],\n            \"childs\": [\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"REFERENCE_01\",\n                \"value\": null,\n                \"type\": \"Object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"Referencefunctioncodequalifier_01\",\n                    \"value\": null,\n                    \"type\": \"String\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": \"serviceProviderReference\",\n                    \"keyOut\": \"Referenceidentifier_02\",\n                    \"value\": null,\n                    \"type\": \"String\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      },\n      {\n        \"keyIn\": \"orderReferences\",\n        \"keyOut\": \"RFFLoop\",\n        \"value\": null,\n        \"type\": \"loop\",\n        \"format\": null,\n        \"keyOutValidation\": null,\n        \"functions\": [],\n        \"childs\": [\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"RFF\",\n            \"value\": null,\n            \"type\": \"Object\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [\n              {\n                \"function\": \"HasValue\",\n                \"parameter\": \"../value\",\n                \"type\": 2\n              }\n            ],\n            \"childs\": [\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"REFERENCE_01\",\n                \"value\": null,\n                \"type\": \"Object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"Referencefunctioncodequalifier_01\",\n                    \"value\": \"FF\",\n                    \"type\": \"String\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": \"value\",\n                    \"keyOut\": \"Referenceidentifier_02\",\n                    \"value\": null,\n                    \"type\": \"String\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      },\n      {\n        \"keyIn\": \"transportPlan\",\n        \"keyOut\": \"TDTLoop\",\n        \"value\": null,\n        \"type\": \"loop\",\n        \"format\": null,\n        \"keyOutValidation\": null,\n        \"functions\": [\n          {\n            \"function\": \"FilterAdvanced\",\n            \"parameter\": \"placeOfReceipt.type=2\",\n            \"type\": 2\n          }\n        ],\n        \"childs\": [\n          {\n            \"keyIn\": \"\",\n            \"keyOut\": \"TDT\",\n            \"value\": null,\n            \"type\": \"Object\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": [\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"Transportstagecodequalifier_01\",\n                \"value\": \"10\",\n                \"type\": \"string\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": []\n              },\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"MODEOFTRANSPORT\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"Transportmodenamecode_01\",\n                    \"value\": \"3\",\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  }\n                ]\n              },\n              {\n                \"keyIn\": \"#\",\n                \"keyOut\": \"CARRIER\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"carrierCode\",\n                    \"keyOut\": \"Carrieridentification_01\",\n                    \"value\": null,\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [\n                      {\n                        \"function\": \"MapMasterData\",\n                        \"parameter\": \"3,\",\n                        \"type\": 9\n                      }\n                    ],\n                    \"childs\": []\n                  }\n                ]\n              }\n            ]\n          },\n          {\n            \"keyIn\": \"\",\n            \"keyOut\": \"LOCLoop\",\n            \"value\": null,\n            \"type\": \"loop\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": [\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"LOC\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"Locationfunctioncodequalifier_01\",\n                    \"value\": \"88\",\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"LOCATIONIDENTIFICATION_02\",\n                    \"value\": null,\n                    \"type\": \"Object\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": [\n                      {\n                        \"keyIn\": \"#placeOfReceipt.code\",\n                        \"keyOut\": \"Locationnamecode_01\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [\n                          {\n                            \"function\": \"MapData\",\n                            \"parameter\": \"1\",\n                            \"type\": 7\n                          }\n                        ],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Codelistidentificationcode_02\",\n                        \"value\": \"139\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Codelistresponsibleagencycode_03\",\n                        \"value\": \"6\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Locationname_04\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [\n                          {\n                            \"function\": \"MapLocationName\",\n                            \"parameter\": \",#placeOfReceipt.code\",\n                            \"type\": 4\n                          }\n                        ],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": null,\n                        \"keyOut\": \"Locationname_04\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      }\n                    ]\n                  }\n                ]\n              },\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"DTM\",\n                \"value\": null,\n                \"type\": \"loop\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"DATETIMEPERIOD_01\",\n                    \"value\": null,\n                    \"type\": \"object\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": [\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Dateortimeorperiodfunctioncodequalifier_01\",\n                        \"value\": \"133\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"#estimatedTimeDeparture\",\n                        \"keyOut\": \"Dateortimeorperiodvalue_02\",\n                        \"value\": null,\n                        \"type\": \"Date\",\n                        \"format\": \"yyyyMMdd\",\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Dateortimeorperiodformatcode_03\",\n                        \"value\": \"102\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      }\n                    ]\n                  }\n                ]\n              }\n            ]\n          },\n          {\n            \"keyIn\": \"\",\n            \"keyOut\": \"LOCLoop\",\n            \"value\": null,\n            \"type\": \"loop\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": [\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"LOC\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"Locationfunctioncodequalifier_01\",\n                    \"value\": \"9\",\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"LOCATIONIDENTIFICATION_02\",\n                    \"value\": null,\n                    \"type\": \"Object\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": [\n                      {\n                        \"keyIn\": \"#placeOfReceipt.code\",\n                        \"keyOut\": \"Locationnamecode_01\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Codelistidentificationcode_02\",\n                        \"value\": \"139\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Codelistresponsibleagencycode_03\",\n                        \"value\": \"6\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"#placeOfReceipt.name\",\n                        \"keyOut\": \"Locationname_04\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"this.Locationname_04\",\n                        \"keyOut\": \"Locationname_04\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      }\n                    ]\n                  }\n                ]\n              },\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"DTM\",\n                \"value\": null,\n                \"type\": \"loop\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"DATETIMEPERIOD_01\",\n                    \"value\": null,\n                    \"type\": \"object\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": [\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Dateortimeorperiodfunctioncodequalifier_01\",\n                        \"value\": \"133\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"#transportPlan.preCarriage[0].etd\",\n                        \"keyOut\": \"Dateortimeorperiodvalue_02\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": \"yyyyMMdd\",\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"#transportPlan\",\n                        \"keyOut\": \"Dateortimeorperiodvalue_02\",\n                        \"value\": null,\n                        \"type\": \"Date\",\n                        \"format\": \"yyyyMMdd\",\n                        \"keyOutValidation\": null,\n                        \"functions\": [\n                          {\n                            \"function\": \"CheckConditionAnd\",\n                            \"parameter\": \"preCarriage[0].etd==null,#transportPlan.mainCarriage[0].etd,this.Dateortimeorperiodvalue_02\",\n                            \"type\": 1\n                          }\n                        ],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Dateortimeorperiodformatcode_03\",\n                        \"value\": \"102\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      }\n                    ]\n                  }\n                ]\n              }\n            ]\n          },\n          {\n            \"keyIn\": \"\",\n            \"keyOut\": \"LOCLoop\",\n            \"value\": null,\n            \"type\": \"loop\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": [\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"LOC\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"Locationfunctioncodequalifier_01\",\n                    \"value\": \"11\",\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"LOCATIONIDENTIFICATION_02\",\n                    \"value\": null,\n                    \"type\": \"Object\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": [\n                      {\n                        \"keyIn\": \"#portOfLoading.code\",\n                        \"keyOut\": \"Locationnamecode_01\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Codelistidentificationcode_02\",\n                        \"value\": \"139\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Codelistresponsibleagencycode_03\",\n                        \"value\": \"6\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"#portOfLoading.name\",\n                        \"keyOut\": \"Locationname_04\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"this.Locationname_04\",\n                        \"keyOut\": \"Locationname_04\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [\n                          {\n                            \"function\": \"ToDoFunction\",\n                            \"parameter\": \"70\",\n                            \"type\": 1\n                          }\n                        ],\n                        \"childs\": []\n                      }\n                    ]\n                  }\n                ]\n              },\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"DTM\",\n                \"value\": null,\n                \"type\": \"loop\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"DATETIMEPERIOD_01\",\n                    \"value\": null,\n                    \"type\": \"object\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": [\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Dateortimeorperiodfunctioncodequalifier_01\",\n                        \"value\": \"132\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"#transportPlan.preCarriage[-1:].eta\",\n                        \"keyOut\": \"Dateortimeorperiodvalue_02\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": \"yyyyMMdd\",\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"#transportPlan\",\n                        \"keyOut\": \"Dateortimeorperiodvalue_02\",\n                        \"value\": null,\n                        \"type\": \"Date\",\n                        \"format\": \"yyyyMMdd\",\n                        \"keyOutValidation\": null,\n                        \"functions\": [\n                          {\n                            \"function\": \"CheckConditionAnd\",\n                            \"parameter\": \"preCarriage[0].eta==null,#transportPlan.mainCarriage[0].eta,this.Dateortimeorperiodvalue_02\",\n                            \"type\": 1\n                          }\n                        ],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Dateortimeorperiodformatcode_03\",\n                        \"value\": \"102\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      }\n                    ]\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      },\n      {\n        \"keyIn\": \"transportPlan\",\n        \"keyOut\": \"TDTLoop\",\n        \"value\": null,\n        \"type\": \"loop\",\n        \"format\": null,\n        \"keyOutValidation\": null,\n        \"functions\": [],\n        \"childs\": [\n          {\n            \"keyIn\": \"\",\n            \"keyOut\": \"TDT\",\n            \"value\": null,\n            \"type\": \"Object\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": [\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"Transportstagecodequalifier_01\",\n                \"value\": \"20\",\n                \"type\": \"string\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": []\n              },\n              {\n                \"keyIn\": \"mainCarriage[0].conveyanceReferenceNumber\",\n                \"keyOut\": \"ConveyanceReferenceNumber_02\",\n                \"value\": null,\n                \"type\": \"string\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [\n                  {\n                    \"function\": \"SubString\",\n                    \"parameter\": \"17\",\n                    \"type\": 1\n                  }\n                ],\n                \"childs\": []\n              },\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"MODEOFTRANSPORT\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"Transportmodenamecode_01\",\n                    \"value\": \"1\",\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  }\n                ]\n              },\n              {\n                \"keyIn\": \"#\",\n                \"keyOut\": \"CARRIER\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"carrierCode\",\n                    \"keyOut\": \"Carrieridentification_01\",\n                    \"value\": null,\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [\n                      {\n                        \"function\": \"MapMasterData\",\n                        \"parameter\": \"3,\",\n                        \"type\": 9\n                      }\n                    ],\n                    \"childs\": []\n                  }\n                ]\n              },\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"TRANSPORTIDENTIFICATION\",\n                \"value\": null,\n                \"type\": \"Object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"mainCarriage[0].transportMean.identification\",\n                    \"keyOut\": \"TransportMeansIdentificationNameIdentifier_01\",\n                    \"value\": null,\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": null,\n                    \"keyOut\": \"Transportmeansidentificationname_04\",\n                    \"value\": null,\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [\n                      {\n                        \"function\": \"CheckConditionAnd\",\n                        \"parameter\": \"transportPlan.mainCarriage[0].transportMean.name!=null,#transportPlan.mainCarriage[0].transportMean.name,#carrierSelection.vessel\",\n                        \"type\": 1\n                      }\n                    ],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": \"this.Transportmeansidentificationname_04\",\n                    \"keyOut\": \"Transportmeansidentificationname_04\",\n                    \"value\": null,\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [\n                      {\n                        \"function\": \"SubString\",\n                        \"parameter\": \"35\",\n                        \"type\": 1\n                      }\n                    ],\n                    \"childs\": []\n                  }\n                ]\n              }\n            ]\n          },\n          {\n            \"keyIn\": \"\",\n            \"keyOut\": \"LOCLoop\",\n            \"value\": null,\n            \"type\": \"loop\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [\n              {\n                \"function\": \"FilterAdvanced\",\n                \"parameter\": \"placeOfReceipt.type!=2\",\n                \"type\": 2\n              }\n            ],\n            \"childs\": [\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"LOC\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"Locationfunctioncodequalifier_01\",\n                    \"value\": \"88\",\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"LOCATIONIDENTIFICATION_02\",\n                    \"value\": null,\n                    \"type\": \"Object\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": [\n                      {\n                        \"keyIn\": \"#placeOfReceipt.code\",\n                        \"keyOut\": \"Locationnamecode_01\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [\n                          {\n                            \"function\": \"MapData\",\n                            \"parameter\": \"1\",\n                            \"type\": 7\n                          }\n                        ],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Codelistidentificationcode_02\",\n                        \"value\": \"139\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Codelistresponsibleagencycode_03\",\n                        \"value\": \"6\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Locationname_04\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [\n                          {\n                            \"function\": \"MapLocationName\",\n                            \"parameter\": \",#placeOfReceipt.code\",\n                            \"type\": 4\n                          }\n                        ],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Locationname_04\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      }\n                    ]\n                  }\n                ]\n              },\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"DTM\",\n                \"value\": null,\n                \"type\": \"loop\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"DATETIMEPERIOD_01\",\n                    \"value\": null,\n                    \"type\": \"object\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": [\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Dateortimeorperiodfunctioncodequalifier_01\",\n                        \"value\": \"133\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"#estimatedTimeDeparture\",\n                        \"keyOut\": \"Dateortimeorperiodvalue_02\",\n                        \"value\": null,\n                        \"type\": \"Date\",\n                        \"format\": \"yyyyMMdd\",\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Dateortimeorperiodformatcode_03\",\n                        \"value\": \"102\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      }\n                    ]\n                  }\n                ]\n              }\n            ]\n          },\n          {\n            \"keyIn\": \"\",\n            \"keyOut\": \"LOCLoop\",\n            \"value\": null,\n            \"type\": \"loop\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [\n              {\n                \"function\": \"FilterAdvanced\",\n                \"parameter\": \"finalDestination.type!=2\",\n                \"type\": 2\n              }\n            ],\n            \"childs\": [\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"LOC\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"Locationfunctioncodequalifier_01\",\n                    \"value\": \"7\",\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"LOCATIONIDENTIFICATION_02\",\n                    \"value\": null,\n                    \"type\": \"Object\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": [\n                      {\n                        \"keyIn\": \"#finalDestination.code\",\n                        \"keyOut\": \"Locationnamecode_01\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [\n                          {\n                            \"function\": \"MapData\",\n                            \"parameter\": \"1\",\n                            \"type\": 7\n                          }\n                        ],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Codelistidentificationcode_02\",\n                        \"value\": \"139\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Codelistresponsibleagencycode_03\",\n                        \"value\": \"6\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": null,\n                        \"keyOut\": \"Locationname_04\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [\n                          {\n                            \"function\": \"MapLocationName\",\n                            \"parameter\": \",#finalDestination.code\",\n                            \"type\": 4\n                          }\n                        ],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"this.Locationname_04\",\n                        \"keyOut\": \"Locationname_04\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [\n                          {\n                            \"function\": \"ToDoFunction\",\n                            \"parameter\": \"70\",\n                            \"type\": 1\n                          }\n                        ],\n                        \"childs\": []\n                      }\n                    ]\n                  }\n                ]\n              },\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"DTM\",\n                \"value\": null,\n                \"type\": \"loop\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"DATETIMEPERIOD_01\",\n                    \"value\": null,\n                    \"type\": \"object\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": [\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Dateortimeorperiodfunctioncodequalifier_01\",\n                        \"value\": \"132\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"#transportPlan.onCarriage[-1:].eta\",\n                        \"keyOut\": \"Dateortimeorperiodvalue_02\",\n                        \"value\": null,\n                        \"type\": \"Date\",\n                        \"format\": \"yyyyMMdd\",\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Dateortimeorperiodformatcode_03\",\n                        \"value\": \"102\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      }\n                    ]\n                  }\n                ]\n              }\n            ]\n          },\n          {\n            \"keyIn\": \"\",\n            \"keyOut\": \"LOCLoop\",\n            \"value\": null,\n            \"type\": \"loop\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": [\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"LOC\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"Locationfunctioncodequalifier_01\",\n                    \"value\": \"9\",\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"LOCATIONIDENTIFICATION_02\",\n                    \"value\": null,\n                    \"type\": \"Object\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": [\n                      {\n                        \"keyIn\": \"#portOfLoading.code\",\n                        \"keyOut\": \"Locationnamecode_01\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Codelistidentificationcode_02\",\n                        \"value\": \"139\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Codelistresponsibleagencycode_03\",\n                        \"value\": \"6\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"#portOfLoading.name\",\n                        \"keyOut\": \"Locationname_04\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"this.Locationname_04\",\n                        \"keyOut\": \"Locationname_04\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [\n                          {\n                            \"function\": \"ToDoFunction\",\n                            \"parameter\": \"70\",\n                            \"type\": 1\n                          }\n                        ],\n                        \"childs\": []\n                      }\n                    ]\n                  }\n                ]\n              },\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"DTM\",\n                \"value\": null,\n                \"type\": \"loop\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"DATETIMEPERIOD_01\",\n                    \"value\": null,\n                    \"type\": \"object\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": [\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Dateortimeorperiodfunctioncodequalifier_01\",\n                        \"value\": \"133\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"estimatedTimeDeparture\",\n                        \"keyOut\": \"Dateortimeorperiodvalue_02\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": \"yyyyMMdd\",\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"#transportPlan\",\n                        \"keyOut\": \"Dateortimeorperiodvalue_02\",\n                        \"value\": null,\n                        \"type\": \"Date\",\n                        \"format\": \"yyyyMMdd\",\n                        \"keyOutValidation\": null,\n                        \"functions\": [\n                          {\n                            \"function\": \"CheckConditionAnd\",\n                            \"parameter\": \"mainCarriage[0].etd!=null,#transportPlan.mainCarriage[0].etd,this.Dateortimeorperiodvalue_02\",\n                            \"type\": 1\n                          }\n                        ],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Dateortimeorperiodformatcode_03\",\n                        \"value\": \"102\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      }\n                    ]\n                  }\n                ]\n              }\n            ]\n          },\n          {\n            \"keyIn\": \"\",\n            \"keyOut\": \"LOCLoop\",\n            \"value\": null,\n            \"type\": \"loop\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": [\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"LOC\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"Locationfunctioncodequalifier_01\",\n                    \"value\": \"11\",\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"LOCATIONIDENTIFICATION_02\",\n                    \"value\": null,\n                    \"type\": \"Object\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": [\n                      {\n                        \"keyIn\": \"#portOfDischarge.code\",\n                        \"keyOut\": \"Locationnamecode_01\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": null,\n                        \"keyOut\": \"Locationnamecode_01\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [\n                          {\n                            \"function\": \"CheckConditionAnd\",\n                            \"parameter\": \"finalDestination.code!=null,#finalDestination.code,this.Locationnamecode_01\",\n                            \"type\": 1\n                          }\n                        ],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Codelistidentificationcode_02\",\n                        \"value\": \"139\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Codelistresponsibleagencycode_03\",\n                        \"value\": \"6\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"#portOfDischarge.name\",\n                        \"keyOut\": \"Locationname_04\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": null,\n                        \"keyOut\": \"Locationname_04\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [\n                          {\n                            \"function\": \"CheckConditionAnd\",\n                            \"parameter\": \"finalDestination.name!=null,#finalDestination.name,this.Locationname_04\",\n                            \"type\": 1\n                          }\n                        ],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"this.Locationname_04\",\n                        \"keyOut\": \"Locationname_04\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [\n                          {\n                            \"function\": \"ToDoFunction\",\n                            \"parameter\": \"70\",\n                            \"type\": 1\n                          }\n                        ],\n                        \"childs\": []\n                      }\n                    ]\n                  }\n                ]\n              },\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"DTM\",\n                \"value\": null,\n                \"type\": \"loop\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"DATETIMEPERIOD_01\",\n                    \"value\": null,\n                    \"type\": \"object\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": [\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Dateortimeorperiodfunctioncodequalifier_01\",\n                        \"value\": \"132\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"#transportPlan.mainCarriage[-1:].eta\",\n                        \"keyOut\": \"Dateortimeorperiodvalue_02\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": \"yyyyMMdd\",\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"#transportPlan\",\n                        \"keyOut\": \"Dateortimeorperiodvalue_02\",\n                        \"value\": null,\n                        \"type\": \"Date\",\n                        \"format\": \"yyyyMMdd\",\n                        \"keyOutValidation\": null,\n                        \"functions\": [\n                          {\n                            \"function\": \"CheckConditionAnd\",\n                            \"parameter\": \"onCarriage[-1:].eta!=null,#transportPlan.onCarriage[-1:].eta,this.Dateortimeorperiodvalue_02\",\n                            \"type\": 1\n                          }\n                        ],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Dateortimeorperiodformatcode_03\",\n                        \"value\": \"102\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      }\n                    ]\n                  }\n                ]\n              }\n            ]\n          },\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"LOCLoop\",\n            \"value\": null,\n            \"type\": \"loop\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [\n              {\n                \"function\": \"IsContainsProperty\",\n                \"parameter\": \"carrierOfficeLocationUnlocode\",\n                \"type\": 2\n              }\n            ],\n            \"childs\": [\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"LOC\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"Locationfunctioncodequalifier_01\",\n                    \"value\": \"197\",\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"LOCATIONIDENTIFICATION_02\",\n                    \"value\": null,\n                    \"type\": \"Object\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": [\n                      {\n                        \"keyIn\": \"#carrierOfficeLocationUnlocode\",\n                        \"keyOut\": \"Locationnamecode_01\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": null,\n                        \"keyOut\": \"Codelistidentificationcode_02\",\n                        \"value\": \"181\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": null,\n                        \"keyOut\": \"Codelistresponsibleagencycode_03\",\n                        \"value\": \"6\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      }\n                    ]\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      },\n      {\n        \"keyIn\": \"transportPlan\",\n        \"keyOut\": \"TDTLoop\",\n        \"value\": null,\n        \"type\": \"loop\",\n        \"format\": null,\n        \"keyOutValidation\": null,\n        \"functions\": [\n          {\n            \"function\": \"FilterAdvanced\",\n            \"parameter\": \"finalDestination.type=2\",\n            \"type\": 2\n          }\n        ],\n        \"childs\": [\n          {\n            \"keyIn\": \"\",\n            \"keyOut\": \"TDT\",\n            \"value\": null,\n            \"type\": \"Object\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": [\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"Transportstagecodequalifier_01\",\n                \"value\": \"30\",\n                \"type\": \"string\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": []\n              },\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"MODEOFTRANSPORT\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"Transportmodenamecode_01\",\n                    \"value\": \"3\",\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  }\n                ]\n              },\n              {\n                \"keyIn\": \"#\",\n                \"keyOut\": \"CARRIER\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"carrierCode\",\n                    \"keyOut\": \"Carrieridentification_01\",\n                    \"value\": null,\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [\n                      {\n                        \"function\": \"MapMasterData\",\n                        \"parameter\": \"3,\",\n                        \"type\": 9\n                      }\n                    ],\n                    \"childs\": []\n                  }\n                ]\n              }\n            ]\n          },\n          {\n            \"keyIn\": \"\",\n            \"keyOut\": \"LOCLoop\",\n            \"value\": null,\n            \"type\": \"loop\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": [\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"LOC\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"Locationfunctioncodequalifier_01\",\n                    \"value\": \"7\",\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"LOCATIONIDENTIFICATION_02\",\n                    \"value\": null,\n                    \"type\": \"Object\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": [\n                      {\n                        \"keyIn\": \"#finalDestination.code\",\n                        \"keyOut\": \"Locationnamecode_01\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [\n                          {\n                            \"function\": \"MapData\",\n                            \"parameter\": \"1\",\n                            \"type\": 7\n                          }\n                        ],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Codelistidentificationcode_02\",\n                        \"value\": \"139\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Codelistresponsibleagencycode_03\",\n                        \"value\": \"6\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": null,\n                        \"keyOut\": \"Locationname_04\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [\n                          {\n                            \"function\": \"MapLocationName\",\n                            \"parameter\": \",#finalDestination.code\",\n                            \"type\": 4\n                          }\n                        ],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"this.Locationname_04\",\n                        \"keyOut\": \"Locationname_04\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [\n                          {\n                            \"function\": \"ToDoFunction\",\n                            \"parameter\": \"70\",\n                            \"type\": 1\n                          }\n                        ],\n                        \"childs\": []\n                      }\n                    ]\n                  }\n                ]\n              },\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"DTM\",\n                \"value\": null,\n                \"type\": \"loop\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"DATETIMEPERIOD_01\",\n                    \"value\": null,\n                    \"type\": \"object\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": [\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Dateortimeorperiodfunctioncodequalifier_01\",\n                        \"value\": \"132\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"#transportPlan.onCarriage[-1:].eta\",\n                        \"keyOut\": \"Dateortimeorperiodvalue_02\",\n                        \"value\": null,\n                        \"type\": \"Date\",\n                        \"format\": \"yyyyMMdd\",\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Dateortimeorperiodformatcode_03\",\n                        \"value\": \"102\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      }\n                    ]\n                  }\n                ]\n              }\n            ]\n          },\n          {\n            \"keyIn\": \"\",\n            \"keyOut\": \"LOCLoop\",\n            \"value\": null,\n            \"type\": \"loop\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": [\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"LOC\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"Locationfunctioncodequalifier_01\",\n                    \"value\": \"9\",\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"LOCATIONIDENTIFICATION_02\",\n                    \"value\": null,\n                    \"type\": \"Object\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": [\n                      {\n                        \"keyIn\": \"#portOfDischarge.code\",\n                        \"keyOut\": \"Locationnamecode_01\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Codelistidentificationcode_02\",\n                        \"value\": \"139\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Codelistresponsibleagencycode_03\",\n                        \"value\": \"6\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"#portOfDischarge.name\",\n                        \"keyOut\": \"Locationname_04\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      }\n                    ]\n                  }\n                ]\n              },\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"DTM\",\n                \"value\": null,\n                \"type\": \"loop\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"DATETIMEPERIOD_01\",\n                    \"value\": null,\n                    \"type\": \"object\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": [\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Dateortimeorperiodfunctioncodequalifier_01\",\n                        \"value\": \"133\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"#transportPlan.onCarriage[0].etd\",\n                        \"keyOut\": \"Dateortimeorperiodvalue_02\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": \"yyyyMMdd\",\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"#transportPlan\",\n                        \"keyOut\": \"Dateortimeorperiodvalue_02\",\n                        \"value\": null,\n                        \"type\": \"Date\",\n                        \"format\": \"yyyyMMdd\",\n                        \"keyOutValidation\": null,\n                        \"functions\": [\n                          {\n                            \"function\": \"CheckConditionAnd\",\n                            \"parameter\": \"onCarriage[0].etd==null,#transportPlan.mainCarriage[0].eta,this.Dateortimeorperiodvalue_02\",\n                            \"type\": 1\n                          }\n                        ],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Dateortimeorperiodformatcode_03\",\n                        \"value\": \"102\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      }\n                    ]\n                  }\n                ]\n              }\n            ]\n          },\n          {\n            \"keyIn\": \"\",\n            \"keyOut\": \"LOCLoop\",\n            \"value\": null,\n            \"type\": \"loop\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": [\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"LOC\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"Locationfunctioncodequalifier_01\",\n                    \"value\": \"11\",\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"LOCATIONIDENTIFICATION_02\",\n                    \"value\": null,\n                    \"type\": \"Object\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": [\n                      {\n                        \"keyIn\": \"#finalDestination.code\",\n                        \"keyOut\": \"Locationnamecode_01\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Codelistidentificationcode_02\",\n                        \"value\": \"139\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Codelistresponsibleagencycode_03\",\n                        \"value\": \"6\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"#finalDestination.name\",\n                        \"keyOut\": \"Locationname_04\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"this.Locationname_04\",\n                        \"keyOut\": \"Locationname_04\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [\n                          {\n                            \"function\": \"ToDoFunction\",\n                            \"parameter\": \"70\",\n                            \"type\": 1\n                          }\n                        ],\n                        \"childs\": []\n                      }\n                    ]\n                  }\n                ]\n              },\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"DTM\",\n                \"value\": null,\n                \"type\": \"loop\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"\",\n                    \"keyOut\": \"DATETIMEPERIOD_01\",\n                    \"value\": null,\n                    \"type\": \"object\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": [\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Dateortimeorperiodfunctioncodequalifier_01\",\n                        \"value\": \"132\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"#transportPlan.onCarriage[-1:].eta\",\n                        \"keyOut\": \"Dateortimeorperiodvalue_02\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": \"yyyyMMdd\",\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"#transportPlan\",\n                        \"keyOut\": \"Dateortimeorperiodvalue_02\",\n                        \"value\": null,\n                        \"type\": \"Date\",\n                        \"format\": \"yyyyMMdd\",\n                        \"keyOutValidation\": null,\n                        \"functions\": [\n                          {\n                            \"function\": \"CheckConditionAnd\",\n                            \"parameter\": \"onCarriage[0].eta==null,#transportPlan.mainCarriage[0].eta,this.Dateortimeorperiodvalue_02\",\n                            \"type\": 1\n                          }\n                        ],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"\",\n                        \"keyOut\": \"Dateortimeorperiodformatcode_03\",\n                        \"value\": \"102\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      }\n                    ]\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      },\n      {\n        \"keyIn\": \"#\",\n        \"keyOut\": \"NADLoop\",\n        \"value\": null,\n        \"type\": \"loop\",\n        \"format\": null,\n        \"keyOutValidation\": null,\n        \"functions\": [],\n        \"childs\": [\n          {\n            \"keyIn\": \"#\",\n            \"keyOut\": \"NAD\",\n            \"value\": null,\n            \"type\": \"object\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": [\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"PartyFunctionCodeQualifier_01\",\n                \"value\": \"BA\",\n                \"type\": \"string\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": []\n              },\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"PARTYIDENTIFICATIONDETAILS_02\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"bookingUserEdiPartnerId\",\n                    \"keyOut\": \"Partyidentifier_01\",\n                    \"value\": null,\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": null,\n                    \"keyOut\": \"Codelistidentificationcode_02\",\n                    \"value\": \"160\",\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": null,\n                    \"keyOut\": \"Codelistresponsibleagencycode_03\",\n                    \"value\": \"87\",\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  }\n                ]\n              },\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"PARTYNAME_04\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"bookingUserCompanyName\",\n                    \"keyOut\": \"Partyname_01\",\n                    \"value\": null,\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": \"userName\",\n                    \"keyOut\": \"Partyname_02\",\n                    \"value\": null,\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  }\n                ]\n              }\n            ]\n          },\n          {\n            \"keyIn\": \"#\",\n            \"keyOut\": \"CTALoop\",\n            \"value\": null,\n            \"type\": \"loop\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": [\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"CTA\",\n                \"value\": null,\n                \"type\": \"Object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [\n                  {\n                    \"function\": \"HasValue\",\n                    \"parameter\": \"userName\",\n                    \"type\": 2\n                  }\n                ],\n                \"childs\": [\n                  {\n                    \"keyIn\": null,\n                    \"keyOut\": \"ContactFunctionCode\",\n                    \"value\": \"IC\",\n                    \"type\": \"String\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": null,\n                    \"keyOut\": \"DEPARTMENTOREMPLOYEEDETAILS_02\",\n                    \"value\": null,\n                    \"type\": \"Object\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": [\n                      {\n                        \"keyIn\": \"#userName\",\n                        \"keyOut\": \"Departmentoremployee_02\",\n                        \"value\": null,\n                        \"type\": \"String\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      }\n                    ]\n                  }\n                ]\n              },\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"COM\",\n                \"value\": null,\n                \"type\": \"loop\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [\n                  {\n                    \"function\": \"HasValue\",\n                    \"parameter\": \"userEmail\",\n                    \"type\": 2\n                  }\n                ],\n                \"childs\": [\n                  {\n                    \"keyIn\": null,\n                    \"keyOut\": \"COMMUNICATIONCONTACT_01\",\n                    \"value\": null,\n                    \"type\": \"Object\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": [\n                      {\n                        \"keyIn\": \"#userEmail\",\n                        \"keyOut\": \"CommunicationNumber_01\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": null,\n                        \"keyOut\": \"CommunicationNumberCodeQualifier_02\",\n                        \"value\": \"EM\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      }\n                    ]\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      },\n      {\n        \"keyIn\": \"parties\",\n        \"keyOut\": \"NADLoop\",\n        \"value\": null,\n        \"type\": \"loop\",\n        \"format\": null,\n        \"keyOutValidation\": null,\n        \"functions\": [\n          {\n            \"function\": \"FilterAdvanced\",\n            \"parameter\": \"type!=CA&type!=ZZZ\",\n            \"type\": 2\n          }\n        ],\n        \"childs\": [\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"NAD\",\n            \"value\": null,\n            \"type\": \"object\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": [\n              {\n                \"keyIn\": \"../../type\",\n                \"keyOut\": \"PartyFunctionCodeQualifier_01\",\n                \"value\": null,\n                \"type\": \"string\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [\n                  {\n                    \"function\": \"SelectValueForArray\",\n                    \"parameter\": \"FP=IV|CT=FC\",\n                    \"type\": 1\n                  }\n                ],\n                \"childs\": []\n              },\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"PARTYIDENTIFICATIONDETAILS_02\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"ediPartnerId\",\n                    \"keyOut\": \"Partyidentifier_01\",\n                    \"value\": null,\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [\n                      {\n                        \"function\": \"ToDoFunction\",\n                        \"parameter\": \"35\",\n                        \"type\": 1\n                      }\n                    ],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": null,\n                    \"keyOut\": \"Codelistidentificationcode_02\",\n                    \"value\": \"160\",\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": null,\n                    \"keyOut\": \"Codelistresponsibleagencycode_03\",\n                    \"value\": \"87\",\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  }\n                ]\n              },\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"PARTYNAME_04\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"name\",\n                    \"keyOut\": \"Partyname_01\",\n                    \"value\": null,\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": \"name\",\n                    \"keyOut\": \"Partyname_02\",\n                    \"value\": null,\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  }\n                ]\n              },\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"STREET_05\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"address.lines[0]\",\n                    \"keyOut\": \"Streetandnumberpobox_01\",\n                    \"value\": null,\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [\n                      {\n                        \"function\": \"ToDoFunction\",\n                        \"parameter\": \"35\",\n                        \"type\": 1\n                      }\n                    ],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": \"address.lines[1]\",\n                    \"keyOut\": \"Streetandnumberpobox_02\",\n                    \"value\": null,\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": \"address.lines[2]\",\n                    \"keyOut\": \"Streetandnumberpobox_03\",\n                    \"value\": null,\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": null,\n                    \"keyOut\": \"Streetandnumberpobox_02\",\n                    \"value\": null,\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [\n                      {\n                        \"function\": \"JoinStrings\",\n                        \"parameter\": \" ,this.Streetandnumberpobox_02,this.Streetandnumberpobox_03\",\n                        \"type\": 1\n                      }\n                    ],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": \"address.zip\",\n                    \"keyOut\": \"Streetandnumberpobox_03\",\n                    \"value\": null,\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": \"address.city\",\n                    \"keyOut\": \"Streetandnumberpobox_04\",\n                    \"value\": null,\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": null,\n                    \"keyOut\": \"Streetandnumberpobox_03\",\n                    \"value\": null,\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [\n                      {\n                        \"function\": \"JoinStrings\",\n                        \"parameter\": \" ,this.Streetandnumberpobox_03,this.Streetandnumberpobox_04\",\n                        \"type\": 1\n                      }\n                    ],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": \"address.countryCode\",\n                    \"keyOut\": \"Streetandnumberpobox_04\",\n                    \"value\": null,\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  }\n                ]\n              }\n            ]\n          },\n          {\n            \"keyIn\": \"charges\",\n            \"keyOut\": \"CPILoop\",\n            \"value\": null,\n            \"type\": \"loop\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [\n              {\n                \"function\": \"FilterAdvanced\",\n                \"parameter\": \"type!=8&value!=null\",\n                \"type\": 2\n              }\n            ],\n            \"childs\": [\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"CPI\",\n                \"value\": null,\n                \"type\": \"Object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": null,\n                    \"keyOut\": \"CHARGECATEGORY_01\",\n                    \"value\": null,\n                    \"type\": \"Object\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": [\n                      {\n                        \"keyIn\": \"type\",\n                        \"keyOut\": \"Chargecategorycoded_01\",\n                        \"value\": null,\n                        \"type\": \"String\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      }\n                    ]\n                  },\n                  {\n                    \"keyIn\": \"value\",\n                    \"keyOut\": \"Prepaidcollectindicatorcode_03\",\n                    \"value\": null,\n                    \"type\": \"String\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [\n                      {\n                        \"function\": \"GetAsciiCode\",\n                        \"parameter\": \"\",\n                        \"type\": 1\n                      }\n                    ],\n                    \"childs\": []\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      },\n      {\n        \"keyIn\": \"items\",\n        \"keyOut\": \"GIDLoop\",\n        \"value\": null,\n        \"type\": \"loop\",\n        \"format\": null,\n        \"keyOutValidation\": null,\n        \"functions\": [],\n        \"childs\": [\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"GID\",\n            \"value\": null,\n            \"type\": \"object\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": [\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"Goodsitemnumber_01\",\n                \"value\": null,\n                \"type\": \"sequence\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": []\n              },\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"NUMBERANDTYPEOFPACKAGES_01\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"packages\",\n                    \"keyOut\": \"Numberofpackages_01\",\n                    \"value\": null,\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": \"packageType\",\n                    \"keyOut\": \"Packagetypedescriptioncode_02\",\n                    \"value\": null,\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": null,\n                    \"keyOut\": \"Codelistidentificationcode_03\",\n                    \"value\": \"67\",\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": null,\n                    \"keyOut\": \"Codelistresponsibleagencycode_04\",\n                    \"value\": \"6\",\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  }\n                ]\n              }\n            ]\n          },\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"PIA\",\n            \"value\": null,\n            \"type\": \"Object\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [\n              {\n                \"function\": \"HasValue\",\n                \"parameter\": \"../hsCode\",\n                \"type\": 2\n              }\n            ],\n            \"childs\": [\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"ProductIdFunctionQualifier_01\",\n                \"value\": \"5\",\n                \"type\": \"string\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": []\n              },\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"ItemNumberIdentification_02\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"hsCode\",\n                    \"keyOut\": \"ItemNumber_01\",\n                    \"value\": null,\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [\n                      {\n                        \"function\": \"KeepOnlyDigits\",\n                        \"parameter\": \"\",\n                        \"type\": 1\n                      }\n                    ],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": null,\n                    \"keyOut\": \"ItemTypeIdentificationCode_02\",\n                    \"value\": \"HS\",\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  }\n                ]\n              }\n            ]\n          },\n          {\n            \"keyIn\": \"\",\n            \"keyOut\": \"FTX\",\n            \"value\": null,\n            \"type\": \"loop\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": [\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"Textsubjectcodequalifier_01\",\n                \"value\": \"AAA\",\n                \"type\": \"string\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": []\n              },\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"TEXTLITERAL_04\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"articleDescription\",\n                    \"keyOut\": \"Freetext_01\",\n                    \"value\": null,\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  }\n                ]\n              }\n            ]\n          },\n          {\n            \"keyIn\": \"\",\n            \"keyOut\": \"MEALoop\",\n            \"value\": null,\n            \"type\": \"loop\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": [\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"MEA\",\n                \"value\": null,\n                \"type\": \"Object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": null,\n                    \"keyOut\": \"Measurementattributecode_01\",\n                    \"value\": \"AAE\",\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": null,\n                    \"keyOut\": \"MEASUREMENTDETAILS_02\",\n                    \"value\": null,\n                    \"type\": \"object\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": [\n                      {\n                        \"keyIn\": null,\n                        \"keyOut\": \"MeasuredAttributeCode_01\",\n                        \"value\": \"G\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      }\n                    ]\n                  },\n                  {\n                    \"keyIn\": null,\n                    \"keyOut\": \"VALUERANGE_03\",\n                    \"value\": null,\n                    \"type\": \"object\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": [\n                      {\n                        \"keyIn\": null,\n                        \"keyOut\": \"Measurementunitcode_01\",\n                        \"value\": \"KGM\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"grossWeight\",\n                        \"keyOut\": \"Measurementvalue_02\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      }\n                    ]\n                  }\n                ]\n              }\n            ]\n          },\n          {\n            \"keyIn\": \"\",\n            \"keyOut\": \"MEALoop\",\n            \"value\": null,\n            \"type\": \"loop\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": [\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"MEA\",\n                \"value\": null,\n                \"type\": \"Object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": null,\n                    \"keyOut\": \"Measurementattributecode_01\",\n                    \"value\": \"AAE\",\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": null,\n                    \"keyOut\": \"MEASUREMENTDETAILS_02\",\n                    \"value\": null,\n                    \"type\": \"object\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": [\n                      {\n                        \"keyIn\": null,\n                        \"keyOut\": \"MeasuredAttributeCode_01\",\n                        \"value\": \"AAW\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      }\n                    ]\n                  },\n                  {\n                    \"keyIn\": null,\n                    \"keyOut\": \"VALUERANGE_03\",\n                    \"value\": null,\n                    \"type\": \"object\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": [\n                      {\n                        \"keyIn\": null,\n                        \"keyOut\": \"Measurementunitcode_01\",\n                        \"value\": \"MTQ\",\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      },\n                      {\n                        \"keyIn\": \"volume\",\n                        \"keyOut\": \"Measurementvalue_02\",\n                        \"value\": null,\n                        \"type\": \"string\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      }\n                    ]\n                  }\n                ]\n              }\n            ]\n          },\n          {\n            \"keyIn\": \"#containers\",\n            \"keyOut\": \"SGPLoop\",\n            \"value\": null,\n            \"type\": \"loop\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": [\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"SGP\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": null,\n                    \"keyOut\": \"EQUIPMENTIDENTIFICATION_01\",\n                    \"value\": null,\n                    \"type\": \"object\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": [\n                      {\n                        \"keyIn\": null,\n                        \"keyOut\": \"Equipmentidentificationnumber_01\",\n                        \"value\": null,\n                        \"type\": \"sequence\",\n                        \"format\": null,\n                        \"keyOutValidation\": null,\n                        \"functions\": [],\n                        \"childs\": []\n                      }\n                    ]\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      },\n      {\n        \"keyIn\": \"containers\",\n        \"keyOut\": \"EQDLoop\",\n        \"value\": null,\n        \"type\": \"loop\",\n        \"format\": null,\n        \"keyOutValidation\": null,\n        \"functions\": [],\n        \"childs\": [\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"EQD\",\n            \"value\": null,\n            \"type\": \"object\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": [\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"Equipmenttypecodequalifier_01\",\n                \"value\": \"CN\",\n                \"type\": \"string\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": []\n              },\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"EQUIPMENTIDENTIFICATION_02\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": null,\n                    \"keyOut\": \"Equipmentidentificationnumber_01\",\n                    \"value\": null,\n                    \"type\": \"sequence\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": null,\n                    \"keyOut\": \"Codelistidentificationcode_02\",\n                    \"value\": \"230\",\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  }\n                ]\n              },\n              {\n                \"keyIn\": \"\",\n                \"keyOut\": \"EQUIPMENTSIZEANDTYPE_03\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"../../../type\",\n                    \"keyOut\": \"Equipmentsizeandtypedescriptioncode_01\",\n                    \"value\": null,\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [\n                      {\n                        \"function\": \"MapData\",\n                        \"parameter\": \"5\",\n                        \"type\": 7\n                      }\n                    ],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": \"this.Equipmentsizeandtypedescriptioncode_01\",\n                    \"keyOut\": \"Equipmentsizeandtypedescriptioncode_01\",\n                    \"value\": null,\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [\n                      {\n                        \"function\": \"SelectValueForArray\",\n                        \"parameter\": \"22GP=22G1|42GP=42G1|45GP=45G1|22RT=22R1|42RT=42R1|45RT=45R1|L5GP=L5G1\",\n                        \"type\": 1\n                      }\n                    ],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": null,\n                    \"keyOut\": \"Codelistidentificationcode_02\",\n                    \"value\": \"102\",\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": null,\n                    \"keyOut\": \"Codelistresponsibleagencycode_03\",\n                    \"value\": \"5\",\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  }\n                ]\n              },\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"Equipmentsuppliercoded_04\",\n                \"value\": null,\n                \"type\": \"string\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [\n                  {\n                    \"function\": \"CheckConditionAnd\",\n                    \"parameter\": \"soc==True,1,2\",\n                    \"type\": 1\n                  }\n                ],\n                \"childs\": []\n              }\n            ]\n          },\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"EQN\",\n            \"value\": null,\n            \"type\": \"object\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [],\n            \"childs\": [\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"NUMBEROFUNITDETAILS_01\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"count\",\n                    \"keyOut\": \"Numberofunits_01\",\n                    \"value\": null,\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": null,\n                    \"keyOut\": \"Unittypecodequalifier_02\",\n                    \"value\": \"2\",\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  }\n                ]\n              }\n            ]\n          },\n          {\n            \"keyIn\": null,\n            \"keyOut\": \"TMP\",\n            \"value\": null,\n            \"type\": \"Object\",\n            \"format\": null,\n            \"keyOutValidation\": null,\n            \"functions\": [\n              {\n                \"function\": \"FilterAdvanced\",\n                \"parameter\": \"../reefer.metricType\",\n                \"type\": 2\n              }\n            ],\n            \"childs\": [\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"TemperatureQualifier_01\",\n                \"value\": \"2\",\n                \"type\": \"string\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": []\n              },\n              {\n                \"keyIn\": null,\n                \"keyOut\": \"TEMPERATURESETTING_02\",\n                \"value\": null,\n                \"type\": \"object\",\n                \"format\": null,\n                \"keyOutValidation\": null,\n                \"functions\": [],\n                \"childs\": [\n                  {\n                    \"keyIn\": \"metricValue\",\n                    \"keyOut\": \"TemperatureSetting_01\",\n                    \"value\": null,\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  },\n                  {\n                    \"keyIn\": \"metricType\",\n                    \"keyOut\": \"MeasurementUnitCode_02\",\n                    \"value\": null,\n                    \"type\": \"string\",\n                    \"format\": null,\n                    \"keyOutValidation\": null,\n                    \"functions\": [],\n                    \"childs\": []\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      }\n    ]\n  }\n]";
            //str = str.Replace("\r\n\r\n", "");
            //ReadBookingRequest();
            //ReadBookingConfirmation();
            //BuildBookingRequest();
            //ReadBookingRequest();
            RmSpecChar("Fürther Straße 30",70);

        }

        private static string RmSpecChar(string currentText, int maxLength)
        {
            if (string.IsNullOrWhiteSpace(currentText)) return currentText;

            var encodingProvider = CodePagesEncodingProvider.Instance;

            Encoding.RegisterProvider(encodingProvider);

            var map = new Dictionary<char, string>() {
                                                      { 'ä', "ae" },
                                                      { 'Ä', "Ae" },
                                                      { 'ö', "oe" },
                                                      { 'Ö', "Oe" },
                                                      { 'ü', "ue" },
                                                      { 'Ü', "Ue" },
                                                      { 'ß', "ss" }
                                                    };

            var res = currentText.Aggregate(
                          new StringBuilder(),
                          (sb, c) => map.TryGetValue(c, out var r) ? sb.Append(r) : sb.Append(c)
                          ).ToString();

            if (maxLength > 0 && currentText.Length > maxLength)
            {
                currentText = currentText.Substring(0, maxLength);
            }
            return currentText;
        }

        public static void BuildBookingRequest()
        {
            const string path = @"C:\Users\suren.vanyan\source\repos\EDIFACT\EDIFACT\EdiWeave.Convertor\BookingRequest\BookingRequest.xml";

            var model = File.ReadAllText(path);

            using var writer = new EdifactWriter(@"C:\Users\suren.vanyan\source\repos\EDIFACT\EDIFACT\EdiWeave.Convertor\BookingRequest\EDIWriter-BookingRequest.txt", false, Encoding.UTF8, "\n");

            XmlDocument doc = new XmlDocument();
            doc.LoadXml(model);
            var jsonModel = JToken.Parse(JsonConvert.SerializeXmlNode(doc)).SelectToken("CarrierBookingRequest");

            writer.Write(EF_EDIFACT_D99B_IFTMBF_Builder.BuildUNA(jsonModel));
            writer.Write(EF_EDIFACT_D99B_IFTMBF_Builder.BuildUNB(jsonModel));
            writer.Write(EF_EDIFACT_D99B_IFTMBF_Builder.BuildIFTMBC("1", jsonModel));
            writer.Write(EF_EDIFACT_D99B_IFTMBF_Builder.BuildUNZ(jsonModel));


        }


        public static void ReadBookingConfirmation()
        {
            const string path = @"C:\Users\suren.vanyan\source\repos\EDIFACT\EdiWeave.Convertor\BookingRequest\80795149.txt";

            var sample = File.ReadAllText(path);

            List<EdiItem> ediItems;

            var ediStream = CommonHelper.GenerateStreamFromString(sample);

            using (var ediReader = new EdifactReader(ediStream, "EDIFACT.TEMPLATES.D99B", Encoding.UTF8,true))
            {
                ediItems = ediReader.ReadToEnd().ToList();
            }

            var jObject = new JObject();

            var unb = ediItems.OfType<UNB>().SingleOrDefault();
            var tSIFTMBC = ediItems.OfType<TSIFTMBC>().SingleOrDefault();
            var unz = ediItems.OfType<UNZ>().SingleOrDefault();

            jObject.Add("UNB", JToken.FromObject(unb, new JsonSerializer { NullValueHandling = NullValueHandling.Ignore }));
            jObject.Add("IFTMBC", JToken.FromObject(tSIFTMBC, new JsonSerializer { NullValueHandling = NullValueHandling.Ignore }));
            jObject.Add("UNZ", JToken.FromObject(unz,new JsonSerializer {NullValueHandling=NullValueHandling.Ignore }));


            if(!tSIFTMBC.IsValid(out MessageErrorContext error))
            {
                jObject.Add("Error", JToken.FromObject(error));
            }
          
            //ToDO Right Click in the File,then select Copy Full Path and paste here
            File.WriteAllText(@"C:\Users\suren.vanyan\source\repos\EDIFACT\EdiWeave.Convertor\BookingRequest\EdifactReader_IFTMBC.json", jObject.ToString());

            var unberrors = unb.Validate();
            var unzerrors = unb.Validate();


            var model = JsonConvert.SerializeObject(tSIFTMBC, new JsonSerializerSettings { NullValueHandling = NullValueHandling.Ignore });
        }


        private static void ReadBookingRequest()
        {
            const string path = @"C:\Users\suren.vanyan\source\repos\EDIFACT\EdiWeave.Convertor\BookingRequest\81310593.txt";

            var sample = File.ReadAllText(path);

            List<EdiItem> ediItems;

            var ediStream = CommonHelper.GenerateStreamFromString(sample);

            using (var ediReader = new EdifactReader(ediStream, "EDIFACT.TEMPLATES.D99B", Encoding.UTF8, true))
            {
                ediItems = ediReader.ReadToEnd().ToList();
            }


            var jObject = new JObject();

            var unb = ediItems.OfType<UNB>().SingleOrDefault();
            var tSiftmbf = ediItems.OfType<TSIFTMBF>().SingleOrDefault();
            var unz = ediItems.OfType<UNZ>().SingleOrDefault();

            jObject.Add("UNB", JToken.FromObject(unb, new JsonSerializer { NullValueHandling = NullValueHandling.Ignore }));
            jObject.Add("IFTMBF", JToken.FromObject(tSiftmbf, new JsonSerializer { NullValueHandling = NullValueHandling.Ignore }));
            jObject.Add("UNZ", JToken.FromObject(unz, new JsonSerializer { NullValueHandling = NullValueHandling.Ignore }));


            if (!tSiftmbf.IsValid(out MessageErrorContext error))
            {
                jObject.Add("Error", JToken.FromObject(error));
            }

            //ToDO Right Click in the File,then select Copy Full Path and paste here
            File.WriteAllText(@"C:\Users\suren.vanyan\source\repos\EDIFACT\EdiWeave.Convertor\BookingRequest\EdifactReader_IFTMBF.json", jObject.ToString());

            var unberrors = unb.Validate();
            var unzerrors = unb.Validate();


            var model = JsonConvert.SerializeObject(tSiftmbf, new JsonSerializerSettings { NullValueHandling = NullValueHandling.Ignore });
        }
    }
}
